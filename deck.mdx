import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { base, ultramin } from "@code-surfer/themes";
import customTheme from "./custom-theme"
import customCodeTheme from "./custom-code-theme"
import Layout from './layout'
import lazyLoading from './images/lazy.png';

export const theme = customTheme;


<Layout>

  # Smart Images Delivery

  A brief introduction to why serve images smarter

</Layout>

---

<Layout>

  # What we will see?

  - Introduction
  - Lazy loading
  - Compressing images
  - Serving responsive images
  - Using WebP format
  - Go to the CDN!
  - "The medium effect"

</Layout>

---

<Layout>

# Lazy Loading

**Why load all images if I will not see all of them**
**Load only the images you will see, can save lots of data**

<img src={lazyLoading} style="height: 42vh; margin-left: 40%;"/>

</Layout>

---

<Layout>

# Lazy Loading
### Loading attribute

- **`Lazy:`** is a good candidate for lazy loading
- **`Eager:`** is not a good candidate to lazy loading. Load right away.
- **`Auto:`** browser will determine wether or not to lazy load.

</Layout>

---

<Layout>
<CodeSurfer theme={customTheme}>

```js title="Lazy Loading"
  <div class="masonry">
      <div
        v-for="(i, index) in imageList"
        :key="index"
        class="masonry-brick"
        :class="{'small' : (index+1)%view == 0 && measure === 'small',
        'medium' : (index+1)%view == 0 && measure === 'medium',
        'large' : (index+1)%view == 0 && measure === 'large'}"
      >
        <img class="image-masonry" :src="i.src">
      </div>
    </div>
```

```js title="Lazy Loading"
  <div class="masonry">
      <div
        v-for="(i, index) in imageList"
        :key="index"
        class="masonry-brick"
        :class="{'small' : (index+1)%view == 0 && measure === 'small',
        'medium' : (index+1)%view == 0 && measure === 'medium',
        'large' : (index+1)%view == 0 && measure === 'large'}"
      >
        <img class="image-masonry" :src="i.src">
        <img class="image-masonry" :src="i.src">
        <img class="image-masonry" :src="i.src">
      </div>
    </div>
```

</CodeSurfer>

</Layout>

---

<CodeSurferColumns themes={[customCodeTheme, ultramin]}>

<Step>

```js
const magna = aliqua => aliqua.ut((enim, ad) => enim, 0);
```

```js
const minim = (ad, enim) => dolore.magna(ad / enim);
```

</Step>

<Step>

```js
/**
   * Sets _rate from data event
   * @param data
   */
  _getRating(data) {
    const ratingRegex = /rating:(\d)/;
    if (ratingRegex.test(data)) {
      this._rate = +ratingRegex.exec(data)[1];
    } else if (data.rating) {
      this._rate = data.rating;
    }
  }

  /**
   * Check if continue is about or not
   * @event glomo-opinator-exit
   * @event logout-success
   * @event message-snackbar
   * @event global-message-snackbar
   */
  _pageFrom() {
    if (this.continue === 'about') {
      this._dispatchEvent('glomo-opinator-exit');
      this._dispatchEvent('global-message-snackbar', this._getToastSnackBarParams());

    } else {
      setTimeout(() => {
        this._dispatchEvent('logout-success');
        this._dispatchEvent('message-snackbar', this._getToastSnackBarParams());
      }, 5000);
    }
  }
```

```js
/**
   * Sets _rate from data event
   * @param data
   */
  _getRating(data) {
    const ratingRegex = /rating:(\d)/;
    if (ratingRegex.test(data)) {
      this._rate = +ratingRegex.exec(data)[1];
    } else if (data.rating) {
      this._rate = data.rating;
    }
  }

  /**
   * Check if continue is about or not
   * @event glomo-opinator-exit
   * @event logout-success
   * @event message-snackbar
   * @event global-message-snackbar
   */
  _pageFrom() {
    if (this.continue === 'about') {
      this._dispatchEvent('glomo-opinator-exit');
      this._dispatchEvent('global-message-snackbar', this._getToastSnackBarParams());

    } else {
      setTimeout(() => {
        this._dispatchEvent('logout-success');
        this._dispatchEvent('message-snackbar', this._getToastSnackBarParams());
      }, 5000);
    }
  }
```

</Step>

</CodeSurferColumns>

---

docs:  
[codesurfer.pomb.us](https://codesurfer.pomb.us)
